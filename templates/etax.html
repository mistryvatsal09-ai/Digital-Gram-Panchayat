<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    {% include 'ehead.html' %}
</head>
<body>

<div class="theme-loader">
<div class="ball-scale">
<div class="contain">
<div class="ring">
<div class="frame"></div>
</div>
<div class="ring">
<div class="frame"></div>
</div>
<div class="ring">
<div class="frame"></div>
</div>
<div class="ring">
<div class="frame"></div>
</div>
<div class="ring">
<div class="frame"></div>
</div>
<div class="ring">
<div class="frame"></div>
</div>
<div class="ring">
<div class="frame"></div>
</div>
<div class="ring">
<div class="frame"></div>
</div>
<div class="ring">
<div class="frame"></div>
</div>
<div class="ring">
<div class="frame"></div>
</div>
</div>
</div>
</div>

<div id="pcoded" class="pcoded">
<div class="pcoded-overlay-box"></div>
<div class="pcoded-container navbar-wrapper">
<nav class="navbar header-navbar pcoded-header">
    {% include 'eheader.html' %}
</nav>

<div id="sidebar" class="users p-chat-user showChat">
<div class="had-container">
<div class="card card_main p-fixed users-main">
<div class="user-box">
<div class="chat-inner-header">
<div class="back_chatBox">
<div class="right-icon-control">
<input type="text" class="form-control  search-text" placeholder="Search Friend" id="search-friends">
<div class="form-icon">
<i class="icofont icofont-search"></i>
</div>
</div>
</div>
</div>
<div class="main-friend-list">
<div class="media userlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">
<a class="media-left" href="#!">
<img class="media-object img-radius img-radius" src="../files/assets/images/avatar-3.jpg" alt="Generic placeholder image ">
<div class="live-status bg-success"></div>
</a>
<div class="media-body">
<div class="f-13 chat-header">Josephin Doe</div>
</div>
</div>
<div class="media userlist-box" data-id="2" data-status="online" data-username="Lary Doe" data-toggle="tooltip" data-placement="left" title="Lary Doe">
<a class="media-left" href="#!">
<img class="media-object img-radius" src="../files/assets/images/avatar-2.jpg" alt="Generic placeholder image">
<div class="live-status bg-success"></div>
</a>
<div class="media-body">
<div class="f-13 chat-header">Lary Doe</div>
</div>
</div>
<div class="media userlist-box" data-id="3" data-status="online" data-username="Alice" data-toggle="tooltip" data-placement="left" title="Alice">
<a class="media-left" href="#!">
<img class="media-object img-radius" src="../files/assets/images/avatar-4.jpg" alt="Generic placeholder image">
<div class="live-status bg-success"></div>
</a>
<div class="media-body">
<div class="f-13 chat-header">Alice</div>
</div>
</div>
<div class="media userlist-box" data-id="4" data-status="online" data-username="Alia" data-toggle="tooltip" data-placement="left" title="Alia">
<a class="media-left" href="#!">
<img class="media-object img-radius" src="../files/assets/images/avatar-3.jpg" alt="Generic placeholder image">
<div class="live-status bg-success"></div>
</a>
<div class="media-body">
<div class="f-13 chat-header">Alia</div>
</div>
</div>
<div class="media userlist-box" data-id="5" data-status="online" data-username="Suzen" data-toggle="tooltip" data-placement="left" title="Suzen">
<a class="media-left" href="#!">
<img class="media-object img-radius" src="../files/assets/images/avatar-2.jpg" alt="Generic placeholder image">
<div class="live-status bg-success"></div>
</a>
<div class="media-body">
<div class="f-13 chat-header">Suzen</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="showChat_inner">
<div class="media chat-inner-header">
<a class="back_chatBox">
<i class="feather icon-chevron-left"></i> Josephin Doe
</a>
</div>
<div class="media chat-messages">
<a class="media-left photo-table" href="#!">
<img class="media-object img-radius img-radius m-t-5" src="../files/assets/images/avatar-3.jpg" alt="Generic placeholder image">
</a>
<div class="media-body chat-menu-content">
<div class>
<p class="chat-cont">I'm just looking around. Will you tell me something about yourself?</p>
<p class="chat-time">8:20 a.m.</p>
</div>
</div>
</div>
<div class="media chat-messages">
<div class="media-body chat-menu-reply">
<div class>
<p class="chat-cont">I'm just looking around. Will you tell me something about yourself?</p>
<p class="chat-time">8:20 a.m.</p>
</div>
</div>
<div class="media-right photo-table">
<a href="#!">
<img class="media-object img-radius img-radius m-t-5" src="../files/assets/images/avatar-4.jpg" alt="Generic placeholder image">
</a>
</div>
</div>
<div class="chat-reply-box p-b-20">
<div class="right-icon-control">
<input type="text" class="form-control search-text" placeholder="Share Your Thoughts">
<div class="form-icon">
<i class="feather icon-navigation"></i>
</div>
</div>
</div>
</div>

<div class="pcoded-main-container">
<div class="pcoded-wrapper">
<nav class="pcoded-navbar">
    {% include 'eleftbar.html' %}
</nav>
<div class="pcoded-content">
<div class="pcoded-inner-content">
<div class="main-body">
<div class="page-wrapper">
<div class="page-body">
<div class="row">

<!--start-->

<div class="col-sm-12">

    <div class="card">
       
        <div class="card-block">
        <h4 class="sub-title">Add Tax</h4>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
        
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">User Name</label>
            <div class="col-sm-10">
            <select name="u_id" class="form-control">
                
            <option value="">Select User</option>
            {% for udata in u_data %}
            <option value="{{udata.0}}">{{udata.1}} | {{udata.4}}</option>
            {% endfor %}
            </select>
            </div>
            </div>
    
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">District Name</label>
                <div class="col-sm-10">
                    <select name="city_dname" id="city_dname" class="form-control">
                        <option value="">--Select--</option>
                        {% for vdata in d_data %}
                        <option value="{{ vdata.0 }}">{{ vdata.0 }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">Taluka Name</label>
                <div class="col-sm-10">
                    <select name="city_tname" id="city_tname" class="form-control">
                        <option value="">--Select--</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">Village Name</label>
                <div class="col-sm-10">
                    <select name="city_vname" id="city_vname" class="form-control">
                        <option value="">--Select--</option>
                    </select>
                </div>
            </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Property Owner Name</label>
            <div class="col-sm-10">
            <input type="text" name="tx_name" class="form-control" placeholder="Enter Tax Name">
        </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Gender</label>
            <div class="col-sm-10">
            <select name="tx_gender" class="form-control">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
            </select>
        </div>
        </div>
    

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Address</label>
            <div class="col-sm-10">
            <textarea name="tx_address" class="form-control" placeholder="Enter Address" ></textarea>
        </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Permanent Address</label>
            <div class="col-sm-10">
            <textarea name="tx_peraddress" class="form-control" placeholder="Enter Permanent Address" ></textarea>
        </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Tax Home</label>
            <div class="col-sm-10">
            <input type="text" name="tx_home" class="form-control" placeholder="Enter Home/Plot No">
        </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Sqrt</label>
            <div class="col-sm-10">
            <input type="text" name="tx_sqrt" class="form-control" placeholder="Enter Sqrt">
        </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Amount</label>
            <div class="col-sm-10">
                <input type="text" name="tx_amount" class="form-control" placeholder="Enter Amount" id="tx_amount" oninput="calculateTotal()">
            </div>
        </div>
        
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Year</label>
            <div class="col-sm-10">
                    <select name="tx_year" class="form-control">
                    {% if tx_data.0.13 == '2025' %}
                        <option value="2025" selected >2025</option>
                        <option value="2024">2024</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                        {% elif tx_data.0.13 == '2024' %}
                        <option value="2025">2025</option>
                        <option value="2024" selected >2024</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                        {% elif tx_data.0.13 == '2023' %}
                        <option value="2025">2025</option>
                        <option value="2024">2024</option>
                        <option value="2023" selected>2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                        {% elif tx_data.0.13 == '2022' %}
                        <option value="2025">2025</option>
                        <option value="2024">2024</option>
                        <option value="2023">2023</option>
                        <option value="2022" selected>2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                        {% elif tx_data.0.13 == '2021' %}
                        <option value="2025">2025</option>
                        <option value="2024">2024</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021" selected>2021</option>
                        <option value="2020">2020</option>
                        {% else %}
                        <option value="2025">2025</option>
                        <option value="2024">2024</option>
                        <option value="2023">2023</option>
                        <option value="2022">2022</option>
                        <option value="2021">2021</option>
                        <option value="2020">2020</option>
                        {% endif %}
                    </select>
            </div>
        </div>
        
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Outstanding</label>
            <div class="col-sm-10">
                <input type="text" name="tx_outstanding" class="form-control" placeholder="Enter Outstanding" id="tx_outstanding" oninput="calculateTotal()">
            </div>
        </div>
        
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Total</label>
            <div class="col-sm-10">
                <input type="text" name="tx_total" class="form-control" placeholder="Enter Total" id="tx_total" readonly>
            </div>
        </div>
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Issue Date</label>
            <div class="col-sm-10">
            <input type="date" name="tx_issue" class="form-control" placeholder="Enter Issue Date">
        </div>
        </div>
     
        <div class="form-group row">
        <label class="col-sm-2 col-form-label">Tax Status</label>
        <div class="col-sm-10">
        <select name="tx_status" class="form-control">
        <option value="Approve">Approve</option>
        <option value="Reject">Reject</option>
        </select>
        </div>
        </div>
    
        <div class="form-group row">
        <label class="col-sm-2 col-form-label">Employee Status</label>
        <div class="col-sm-10">
        <select name="e_status" class="form-control">
        <option value="Active">Active</option>
        <option value="Deactive">Deactive</option>
        </select>
        </div>
        </div>

      

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Remark Detail</label>
            <div class="col-sm-10">
            <textarea name="tx_remarkdetail" class="form-control" placeholder="Enter Remarkdetail" ></textarea>
        </div>
        </div>
        
        <div class="form-group row">
            <label class="col-sm-2"></label>
            <div class="col-sm-10">
            <button type="submit" class="btn btn-primary m-b-0">Submit</button>
            </div>
            </div>
        </form>
       
        </div>
        
    
</div>
<script>
    function calculateTotal() {
        // Get the values from Amount and Outstanding fields
        var amount = parseFloat(document.getElementById('tx_amount').value) || 0;
        var outstanding = parseFloat(document.getElementById('tx_outstanding').value) || 0;
        
        // Calculate the sum of Amount and Outstanding
        var total = amount + outstanding;

        // Set the calculated total in the Total field
        document.getElementById('tx_total').value = total.toFixed(2); // Ensure it's formatted to 2 decimal places
    }
</script>

<script>
    document.getElementById('city_dname').addEventListener('change', function () {
        const district = this.value;

        fetch(`get_taluka/${district}/`)
            .then(response => response.json())
            .then(data => {
                const talukaDropdown = document.getElementById('city_tname');
                talukaDropdown.innerHTML = '<option value="">--Select--</option>';
                data.forEach(item => {
                    talukaDropdown.innerHTML += `<option value="${item.name}">${item.name}</option>`;
                });

                // Clear villages
                document.getElementById('city_vname').innerHTML = '<option value="">--Select--</option>';
            });
    });

    document.getElementById('city_tname').addEventListener('change', function () {
        const taluka = this.value;

        fetch(`get_village/${taluka}/`)
            .then(response => response.json())
            .then(data => {
                const villageDropdown = document.getElementById('city_vname');
                villageDropdown.innerHTML = '<option value="">--Select--</option>';
                data.forEach(item => {
                    villageDropdown.innerHTML += `<option value="${item.name}">${item.name}</option>`;
                });
            });
    });
</script>




<!--table-->
<div class="card">
    <div class="card-header">
    <h5>View Tax Details</h5>
    
    </div>
    <div class="card-block">
    <div class="dt-responsive table-responsive">
    <table id="order-table" class="table table-striped table-bordered nowrap">
    <thead>
    <tr>
        <th>ID</th>
        <th>District Name</th>
        <th>Taluka Name</th>
        <th>Village name</th>
        <th>User</th>
        <th>Name</th>
        <th>Amount</th>
        <th>Total</th>
        <th>Admin Status</th>
        <th>Employee Status</th>
        <th>Created Date</th>
        <th>Updated Date</th>
        <th>Action</th>

    </tr>
    </thead>
    <tbody>
    {% for row in tx_data %}
    <tr>
    <td>{{ forloop.counter }}</td>
    <td>{{row.3}}</td>
    <td>{{row.4}}</td>
    <td>{{row.5}}</td>
    <td>{{row.24}}<br/><label class="label label-primary">{{row.27}}</label></td>
    <td>{{row.6}}</td>
    <td>₹{{row.12}}</td>
    <td>₹{{row.15}}</td>
    <td> 
        
        {% if row.19 == 'Active' %}
         <span class="label-success label label-default">{{row.19}}</span>
        {% else %}
        <span class="label-danger label label-default">{{row.19}}</span>
        {% endif %}
        
   </td>
   <td> 
        <a href="/employeeapp/etax?tx_id={{row.0}}&tax_status={{row.18}}">
        {% if row.18 == 'Active' %}
        <span class="label-success label label-default">{{row.18}}</span>
        {% else %}
        <span class="label-danger label label-default">{{row.18}}</span>
        {% endif %}
        </a>
    </td>
   
    <td>{{row.21|date:'Y-m-d H:i:s'}}</td>
    <td>{{row.22|date:'Y-m-d H:i:s'}}</td>

    <td>
        <a class="btn btn-info" href="/employeeapp/etaxedit?tx_edt={{row.0}}" title="Edit"><i class="fa fa-edit"></i></a>
   
       <!-- <a class="btn btn-info" href="/employeeapp/etaxdetails?tax_id={{row.0}}"    title="Edit"><i class="fa fa-edit"> Details</i></a>-->
        <a class="btn btn-danger" href="/employeeapp/etax?tax_del={{row.0}}"   onclick="return confirm('Are you sure you want to Delete..?');" title="Delete"><i class="fa fa-trash"></i></a>

    </td>
   
  
</td>

     
       
    
    
    
    </tr>
    {% endfor %}
    
 
    </tbody>
    
    </table>
    </div>
    </div>
    </div>
    





<!--end-->
</div>
</div>
</div>

</div>
</div>
</div>
</div>
</div>
</div>
</div>



{% include 'script.html' %}

</body>

</html>